<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Jerma BRB Art Gallery</title>
	
	<meta name="referrer" content="origin">
	<meta name="author" content="Merlin Luntke, Twitch Lazy_Luc"/>
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<meta name="theme-color" content="#292929"/>
	<meta name="robots" content="noindex, nofollow"/>
	<link rel="shortcut icon" sizes="32x32" href="./favicon_32.png"/>
</head>
<body>

<style>
#container {
	position: relative;
	width: 1280px;
	height: 720px;
	border: 1px solid #000000;
}

#img_parent {
	position: absolute;
    z-index: 4;
	top: 0px;
	right: 0px;
	background-image: url(./animation_map.png);
	width: 0px;
	height: 0px;
	background-position-x: 0px;
	background-position-y: 0px;
}

#img_background {
	position: absolute;
    z-index: 2;
    width: 200px;
    top: 0px;
    right: 0px;
    bottom: 0px;
    background-color: #6f6f6f;
}

#paintcan_paint {
	position: absolute;
    z-index: 3;
    right: 0px;
}

#brush_paint_svg {
	position: absolute;
    z-index: 10;
    z-index: 1;
	top: 0px;
	left: 0px;
}

path {
	fill: #1f6535;
    stroke: rgb(10, 33, 17);
    stroke-width: 1px;
}

#click_screen {
	position: absolute;
	z-index: 100;
	top: 0px;
	right: 0px;
	bottom: 0px;
	left: 0px;
}


#brush_paint_previous {
	opacity: 0.125;
}
</style>



<div id="container">
	<div id="click_screen"></div>
	<div id="img_background"></div>
	<svg id="paintcan_paint" width="180" height="450" xmlns="http://www.w3.org/2000/svg">
		<path d="M 117 287 L 162 278 L 168 280 L 171.5 284 L 171 312 L 169 350 L 174 351 L 180 353 L 180 365 L 176 367 L 173 370 L 172 373 L 173 376 L 172 379 L 168 381 L 163 382 L 153 382 L 149 381 L 144 379 L 141 378 L 137 378 L 132 378 L 129 379 L 125 381 L 122 383 L 119 384 L 111 384 L 107 381 L 104 378 L 99 376 L 93 374 L 88 373 L 75 373 L 69 372 L 66 371 L 64 369 L 63 368 L 64 365 L 65 363 L 66 362 L 69 360 L 71 359 L 75 357.5 L 77 356.5 L 86 356 Z"/>
	</svg>
	<svg id="brush_paint_svg" width="1280" height="720" xmlns="http://www.w3.org/2000/svg">
		<path id="brush_paint" d=""/>
		<path id="brush_paint_previous" fill="#ffff00" d=""/>
	</svg>
	<div id="img_parent">
		
	</div>
</div>


<button id="previous_button">Previous</button>
<button id="next_button">Next</button>
<button id="play_button">Play</button>
<button id="stop_button">Stop</button>
<button id="save_button">Save</button>


<script src="./map_data.js"></script>
<script>
/*
i = 0;

setInterval(function(){
    draw_frame("painting", i % 55);
    i += 1;
}, (1000 / 15));



i = 0;

setInterval(function(){
    draw_frame("idle", i % 10);
    i += 1;
}, (1000 / 15));

*/


let path_data = [];
//Final Clip Path
path_data = ["","","","","","","","","","","","","","","","","","","",""," M 110 720 L 126 716 L 140 710 L 153 703 L 162 697 L 171 687 L 179 676 L 188 657 L 190 646 L 191 631 L 191 621 L 187 609 L 182 600 L 174 595 L 161 590 L 145 588 L 130 588 L 118 591 L 102 595 L 90 600 L 75 606 L 65 612 L 53 621 L 41 630 L 33 638 L 25 649 L 20 660 L 17 674 L 17 687 L 20 696 L 25 705 L 31 711 L 39 716 L 46 720"," M 165 720 L 181 711 L 197 699 L 207 688 L 215 677 L 220 667 L 226 654 L 231 637 L 235 622 L 236 613 L 236 600 L 234 586 L 230 572 L 223 561 L 211 553 L 203 550 L 192 548 L 178 547 L 155 548 L 127 550 L 112 552 L 91 555 L 72 559 L 55 563 L 38 567 L 18 574 L 7 578 L 0 582 L 0 720","M 175 720 L 187 715 L 200 706 L 208 699 L 213 691 L 219 679 L 226 664 L 230 650 L 232 639 L 235 627 L 236 614 L 236 603 L 235 591 L 234 583 L 230 572 L 225 565 L 218 557 L 207 552 L 197 549 L 180 548 L 160 548 L 146 548 L 135 549 L 117 551 L 102 552 L 93 553 L 78 550 L 69 543 L 65 540 L 58 537 L 51 536 L 38 534 L 28 534 L 16 536 L 5 538 L 0 540 L 0 720","M 196 720 L 201 717 L 206 713 L 213 704 L 220 693 L 225 680 L 229 666 L 232 653 L 234 636 L 235 624 L 236 611 L 236 600 L 235 590 L 234 582 L 231 572 L 227 566 L 222 560 L 214 555 L 208 552 L 199 549 L 190 548 L 175 548 L 158 548 L 147 547 L 136 544 L 124 540 L 114 535 L 105 527 L 98 517 L 92 505 L 87 490 L 82 470 L 79 455 L 76 441 L 73 429 L 71 418 L 66 405 L 59 395 L 47 388 L 39 385 L 29 383 L 18 383 L 7 384 L 0 385 L 0 720","M 213 720 L 219 712 L 225 700 L 228 689 L 231 676 L 233 663 L 234 648 L 235 634 L 235 616 L 235 596 L 234 589 L 234 584 L 232 577 L 230 571 L 226 566 L 220 559 L 213 554 L 204 550 L 196 549 L 183 548 L 164 548 L 152 547 L 138 544 L 130 543 L 118 537 L 112 533 L 106 527 L 99 518 L 97 514 L 93 500 L 90 486 L 87 468 L 85 451 L 84 436 L 82 421 L 81 404 L 80 388 L 79 378 L 80 366 L 80 349 L 80 336 L 81 323 L 82 306 L 84 291 L 86 277 L 90 261 L 93 248 L 96 237 L 97 219 L 95 207 L 93 199 L 91 193 L 88 189 L 83 185 L 76 182 L 69 180 L 61 180 L 51 182 L 43 184 L 35 187 L 25 191 L 16 197 L 8 202 L 2 206 L 0 208 L 0 720"," M 222 720 L 228 701 L 232 677 L 234 656 L 235 635 L 235 616 L 235 599 L 234 587 L 232 576 L 228 568 L 222 560 L 210 554 L 196 550 L 178 548 L 158 547 L 137 544 L 126 541 L 114 535 L 104 524 L 96 509 L 91 489 L 88 473 L 85 449 L 83 425 L 81 405 L 80 383 L 81 358 L 82 334 L 85 305 L 90 279 L 99 249 L 110 230 L 121 218 L 135 204 L 146 193 L 157 184 L 166 174 L 173 164 L 179 155 L 183 142 L 185 131 L 187 121 L 186 108 L 182 95 L 174 79 L 164 66 L 149 58 L 133 55 L 114 54 L 97 58 L 77 65 L 62 73 L 44 83 L 28 93 L 13 103 L 2 110 L 0 111 L 0 720"," M 228 720 L 231 700 L 234 671 L 235 653 L 235 626 L 235 604 L 234 586 L 231 575 L 225 563 L 218 558 L 207 553 L 192 549 L 176 548 L 159 547 L 146 545 L 132 542 L 121 538 L 111 531 L 102 520 L 96 509 L 92 492 L 87 466 L 84 439 L 83 414 L 81 383 L 82 354 L 86 317 L 92 290 L 102 256 L 110 238 L 120 225 L 133 213 L 147 202 L 163 190 L 178 172 L 186 159 L 193 144 L 198 131 L 200 119 L 201 106 L 199 91 L 195 73 L 190 62 L 183 52 L 173 41 L 162 33 L 147 27 L 129 25 L 109 29 L 91 34 L 73 43 L 53 54 L 37 64 L 19 75 L 6 85 L 0 89 L 0 720"," M 232 720 L 235 687 L 236 659 L 236 639 L 236 614 L 235 591 L 233 581 L 229 571 L 225 563 L 213 555 L 200 551 L 189 549 L 166 547 L 147 545 L 133 542 L 119 537 L 107 527 L 100 516 L 94 503 L 89 478 L 85 447 L 83 421 L 82 396 L 82 371 L 86 336 L 91 311 L 98 279 L 103 263 L 110 247 L 118 235 L 126 227 L 137 219 L 152 209 L 167 202 L 182 195 L 199 189 L 215 183 L 227 176 L 239 166 L 247 159 L 252 151 L 255 142 L 257 134 L 258 122 L 259 109 L 258 93 L 254 76 L 248 60 L 242 47 L 236 36 L 229 28 L 216 18 L 202 10 L 188 5 L 175 2 L 161 0 L 122 0 L 107 2 L 92 5 L 78 10 L 62 17 L 48 23 L 34 29 L 23 35 L 11 41 L 0 46 L 0 720"," M 235 720 L 237 679 L 237 653 L 237 621 L 236 601 L 235 588 L 231 573 L 225 563 L 214 555 L 200 551 L 184 549 L 169 547 L 147 545 L 136 543 L 126 539 L 116 534 L 106 525 L 100 514 L 94 500 L 90 481 L 86 450 L 84 426 L 83 402 L 84 371 L 89 341 L 95 310 L 101 289 L 108 270 L 116 252 L 124 241 L 134 232 L 149 223 L 169 214 L 183 208 L 210 199 L 234 191 L 245 184 L 254 176 L 262 168 L 268 154 L 272 134 L 274 118 L 275 102 L 276 82 L 275 66 L 273 52 L 268 40 L 260 22 L 251 11 L 241 3 L 236 0 L 51 0 L 29 8 L 18 13 L 6 18 L 0 21 L 0 720"," M 238 720 L 240 669 L 239 641 L 238 615 L 235 589 L 229 569 L 224 563 L 214 555 L 197 550 L 175 548 L 151 546 L 136 543 L 119 535 L 109 528 L 103 519 L 95 502 L 91 484 L 87 459 L 85 436 L 83 411 L 84 388 L 88 363 L 92 343 L 96 323 L 103 297 L 113 274 L 124 256 L 137 245 L 156 236 L 178 230 L 207 225 L 228 224 L 249 229 L 268 238 L 282 246 L 297 251 L 314 250 L 326 248 L 340 241 L 349 232 L 357 222 L 361 210 L 365 188 L 367 165 L 367 147 L 364 118 L 357 93 L 350 69 L 341 48 L 330 31 L 317 17 L 308 9 L 295 0 L 4 0 L 0 3 L 0 720"," M 239 720 L 240 682 L 240 656 L 240 627 L 238 608 L 235 587 L 229 570 L 222 562 L 210 554 L 195 550 L 165 547 L 145 545 L 129 539 L 114 531 L 104 519 L 95 501 L 90 473 L 85 439 L 83 409 L 89 372 L 95 342 L 105 312 L 115 293 L 127 280 L 147 269 L 161 265 L 178 263 L 190 263 L 203 265 L 220 271 L 231 279 L 242 294 L 256 317 L 264 334 L 270 355 L 275 375 L 283 395 L 290 409 L 301 424 L 308 433 L 321 444 L 329 452 L 342 460 L 359 464 L 381 465 L 404 462 L 422 454 L 435 445 L 444 432 L 450 416 L 453 400 L 455 381 L 456 356 L 456 329 L 455 302 L 451 267 L 449 230 L 444 178 L 439 152 L 431 118 L 420 81 L 411 54 L 402 33 L 395 17 L 385 4 L 380 0 L 0 0 L 0 720"," M 241 720 L 241 678 L 240 646 L 240 623 L 238 604 L 236 587 L 229 571 L 221 561 L 210 554 L 193 550 L 168 547 L 145 545 L 129 539 L 115 531 L 106 521 L 98 506 L 93 490 L 89 467 L 86 439 L 85 409 L 91 375 L 100 346 L 113 321 L 124 307 L 134 300 L 146 296 L 164 294 L 183 295 L 195 300 L 204 307 L 214 318 L 222 331 L 228 343 L 237 361 L 243 379 L 250 396 L 260 435 L 269 464 L 278 486 L 292 508 L 305 525 L 318 540 L 331 550 L 352 560 L 381 571 L 411 577 L 445 580 L 486 583 L 511 584 L 549 579 L 575 572 L 587 564 L 596 551 L 601 537 L 602 518 L 601 502 L 595 480 L 589 465 L 579 452 L 562 429 L 546 410 L 532 393 L 517 370 L 503 342 L 491 315 L 479 281 L 469 248 L 459 208 L 453 175 L 446 140 L 438 108 L 428 74 L 416 41 L 405 18 L 395 0 L 0 0 L 0 720","M 243 720 L 243 694 L 243 670 L 241 642 L 240 617 L 238 604 L 236 590 L 233 579 L 230 573 L 225 566 L 220 560 L 215 557 L 208 553 L 193 550 L 176 547 L 159 546 L 142 543 L 135 540 L 126 535 L 116 530 L 110 525 L 104 516 L 100 508 L 97 500 L 93 490 L 91 480 L 90 469 L 89 458 L 88 447 L 88 432 L 88 419 L 89 407 L 91 397 L 95 385 L 100 376 L 106 366 L 115 358 L 123 352 L 133 348 L 144 345 L 156 343 L 165 343 L 177 346 L 190 349 L 199 354 L 210 363 L 216 369 L 223 378 L 231 395 L 236 409 L 242 425 L 248 447 L 254 467 L 260 487 L 266 506 L 270 522 L 273 536 L 277 550 L 280 558 L 285 567 L 291 578 L 297 586 L 306 600 L 316 610 L 326 620 L 338 629 L 347 636 L 356 641 L 369 647 L 385 652 L 401 657 L 414 660 L 441 664 L 468 668 L 493 669 L 515 668 L 534 666 L 559 661 L 580 655 L 596 649 L 612 643 L 623 634 L 634 623 L 642 612 L 652 598 L 659 580 L 664 565 L 670 547 L 675 528 L 679 513 L 682 499 L 684 486 L 684 475 L 683 464 L 681 453 L 677 445 L 672 437 L 660 423 L 648 412 L 638 404 L 630 399 L 621 394 L 606 389 L 586 384 L 569 376 L 555 368 L 540 358 L 528 347 L 519 337 L 511 327 L 502 316 L 495 307 L 487 290 L 481 275 L 476 257 L 469 236 L 460 208 L 454 181 L 449 159 L 445 139 L 440 116 L 433 91 L 426 67 L 416 41 L 406 19 L 395 0 L 0 0 L 0 720","M 244 720 L 244 690 L 242 660 L 241 638 L 240 619 L 238 600 L 235 586 L 231 574 L 226 566 L 219 559 L 210 554 L 198 550 L 178 548 L 157 546 L 141 543 L 129 537 L 120 530 L 111 523 L 105 513 L 100 498 L 96 484 L 93 472 L 92 460 L 92 448 L 93 433 L 95 419 L 101 408 L 107 402 L 117 394 L 127 390 L 137 389 L 148 389 L 155 390 L 170 395 L 181 400 L 192 407 L 204 416 L 212 424 L 218 435 L 223 451 L 229 472 L 232 485 L 235 509 L 238 540 L 240 558 L 244 580 L 250 606 L 255 626 L 259 639 L 267 655 L 275 670 L 280 679 L 287 686 L 296 692 L 305 697 L 318 702 L 334 708 L 349 712 L 372 715 L 393 718 L 410 720 L 628 720 L 641 713 L 648 705 L 654 696 L 659 683 L 664 669 L 671 646 L 678 623 L 684 596 L 689 569 L 694 545 L 697 527 L 699 507 L 700 489 L 700 473 L 698 452 L 695 436 L 691 419 L 685 401 L 676 380 L 669 364 L 663 351 L 658 338 L 653 321 L 648 302 L 644 280 L 641 260 L 640 247 L 640 232 L 639 221 L 636 203 L 633 189 L 628 180 L 621 172 L 613 167 L 604 162 L 592 159 L 581 157 L 567 156 L 551 156 L 536 158 L 523 163 L 512 169 L 503 176 L 492 184 L 480 193 L 471 202 L 464 209 L 460 213 L 454 179 L 447 148 L 442 126 L 436 102 L 430 80 L 425 64 L 418 48 L 410 28 L 403 13 L 395 0 L 0 0 L 0 720","M 244 720 L 244 681 L 241 647 L 239 613 L 244 639 L 249 661 L 255 677 L 261 691 L 268 702 L 274 712 L 280 717 L 285 720 L 665 720 L 675 688 L 683 659 L 689 636 L 695 607 L 699 583 L 702 556 L 704 515 L 705 494 L 704 465 L 702 444 L 697 421 L 691 399 L 685 385 L 674 361 L 667 344 L 661 328 L 654 306 L 650 287 L 646 268 L 643 239 L 642 222 L 642 206 L 643 193 L 646 175 L 649 155 L 653 140 L 657 108 L 658 93 L 656 82 L 653 71 L 648 60 L 644 51 L 637 43 L 630 36 L 623 33 L 611 29 L 600 27 L 589 26 L 576 27 L 562 31 L 547 35 L 533 41 L 522 47 L 509 56 L 498 64 L 482 76 L 472 87 L 461 97 L 449 108 L 440 118 L 436 100 L 429 79 L 424 61 L 416 43 L 410 29 L 404 16 L 399 6 L 395 0 L 0 0 L 0 720 M 217 558 L 208 553 L 195 549 L 174 548 L 159 546 L 145 544 L 135 540 L 128 536 L 118 529 L 110 521 L 105 513 L 100 497 L 96 484 L 94 473 L 93 463 L 94 453 L 96 443 L 101 435 L 110 429 L 121 424 L 131 422 L 141 422 L 156 424 L 164 428 L 172 433 L 180 442 L 187 450 L 195 461 L 201 473 L 205 486 L 208 497 L 213 517 L 215 528 L 217 539 L 218 548 L 218 555"," M 244 720 L 244 701 L 244 683 L 243 663 L 247 688 L 251 703 L 257 714 L 261 719 L 262 720 L 671 720 L 677 700 L 680 687 L 685 667 L 690 648 L 694 629 L 697 611 L 701 588 L 703 571 L 704 550 L 705 526 L 705 504 L 704 467 L 702 448 L 700 433 L 693 406 L 686 388 L 679 372 L 669 348 L 660 326 L 654 305 L 649 281 L 645 259 L 643 239 L 642 216 L 644 199 L 646 188 L 649 173 L 652 158 L 658 136 L 661 122 L 663 107 L 669 91 L 673 72 L 673 59 L 669 43 L 664 28 L 655 16 L 646 8 L 635 4 L 620 2 L 602 2 L 584 3 L 565 6 L 546 13 L 522 23 L 503 31 L 488 38 L 475 46 L 461 55 L 447 65 L 434 74 L 429 78 L 424 60 L 416 44 L 409 28 L 403 15 L 395 0 L 0 0 L 0 720 M 183 548 L 171 547 L 155 546 L 145 544 L 133 539 L 123 533 L 115 525 L 110 520 L 105 511 L 101 501 L 99 494 L 97 482 L 99 470 L 104 461 L 111 454 L 124 451 L 134 452 L 146 455 L 155 461 L 166 472 L 174 482 L 179 494 L 182 507 L 183 520 L 184 530 L 184 538 L 183 548"," M 245 720 L 244 703 L 247 712 L 249 718 L 251 720 L 676 720 L 681 706 L 685 692 L 689 675 L 694 655 L 697 636 L 700 616 L 702 601 L 703 578 L 704 561 L 704 538 L 705 516 L 705 489 L 704 464 L 702 444 L 694 411 L 682 377 L 673 356 L 665 338 L 659 322 L 652 296 L 648 275 L 645 257 L 644 244 L 643 234 L 644 221 L 649 209 L 656 201 L 664 193 L 676 185 L 686 180 L 698 174 L 708 168 L 722 160 L 736 152 L 746 145 L 755 136 L 760 128 L 765 118 L 769 103 L 770 93 L 769 79 L 766 65 L 762 53 L 757 42 L 749 31 L 740 21 L 731 13 L 723 7 L 716 3 L 710 0 L 518 0 L 493 9 L 480 15 L 464 23 L 446 32 L 434 39 L 422 46 L 418 48 L 410 31 L 404 17 L 399 7 L 395 0 L 0 0 L 0 720 M 168 546 L 153 545 L 142 543 L 133 539 L 124 533 L 117 527 L 110 520 L 105 510 L 101 502 L 99 493 L 99 482 L 102 475 L 112 470 L 124 470 L 133 474 L 141 480 L 149 489 L 156 499 L 161 511 L 165 521 L 167 530 L 168 537 L 168 543"," M 682 720 L 686 702 L 691 683 L 695 664 L 697 650 L 699 633 L 702 608 L 703 590 L 704 554 L 705 527 L 705 502 L 704 475 L 703 458 L 701 442 L 697 425 L 693 410 L 686 389 L 679 369 L 670 350 L 663 333 L 657 313 L 652 294 L 649 280 L 647 267 L 646 250 L 646 239 L 648 227 L 651 220 L 655 212 L 662 205 L 670 198 L 680 191 L 691 185 L 707 179 L 722 173 L 741 166 L 756 158 L 769 149 L 780 140 L 791 131 L 804 112 L 812 93 L 813 79 L 811 60 L 807 44 L 801 31 L 794 20 L 787 11 L 780 4 L 775 0 L 467 0 L 447 8 L 433 15 L 421 22 L 409 29 L 405 19 L 400 9 L 395 0 L 0 0 L 0 720 M 151 545 L 141 542 L 133 539 L 124 533 L 117 527 L 110 520 L 107 514 L 103 506 L 101 499 L 101 492 L 104 487 L 110 485 L 116 485 L 121 487 L 126 490 L 132 496 L 137 501 L 140 506 L 143 513 L 145 519 L 147 526 L 149 532 L 150 536 L 151 543"," M 688 720 L 692 700 L 696 680 L 699 660 L 700 647 L 702 620 L 703 602 L 704 572 L 704 546 L 705 524 L 705 504 L 704 480 L 704 465 L 702 450 L 697 425 L 692 407 L 686 387 L 680 371 L 672 354 L 665 337 L 661 324 L 656 309 L 652 293 L 650 279 L 650 269 L 651 256 L 653 246 L 656 237 L 662 229 L 672 222 L 681 217 L 695 212 L 715 205 L 732 201 L 754 196 L 776 193 L 806 189 L 827 186 L 851 183 L 871 178 L 885 170 L 894 161 L 903 150 L 911 139 L 915 129 L 919 117 L 921 105 L 921 93 L 920 79 L 915 62 L 909 49 L 901 34 L 891 21 L 880 11 L 870 3 L 864 0 L 429 0 L 413 6 L 401 11 L 395 0 L 0 0 L 0 720 M 133 539 L 127 536 L 120 530 L 112 523 L 108 517 L 106 511 L 106 505 L 110 501 L 114 500 L 120 502 L 125 507 L 131 514 L 133 521 L 134 527 L 134 535"," M 691 720 L 694 708 L 696 694 L 699 678 L 700 663 L 701 643 L 702 624 L 703 598 L 704 576 L 704 549 L 704 529 L 705 507 L 705 493 L 704 476 L 703 459 L 701 444 L 698 427 L 692 408 L 687 391 L 681 373 L 675 360 L 669 348 L 664 333 L 659 318 L 655 304 L 652 291 L 651 280 L 651 267 L 653 256 L 656 248 L 662 240 L 671 234 L 680 228 L 694 223 L 712 218 L 728 215 L 743 214 L 760 213 L 777 214 L 795 218 L 814 224 L 829 229 L 841 234 L 856 239 L 867 241 L 884 244 L 898 245 L 908 244 L 916 242 L 923 239 L 931 234 L 937 226 L 943 217 L 946 209 L 950 199 L 952 189 L 952 178 L 951 163 L 950 149 L 949 133 L 947 118 L 945 101 L 941 86 L 937 72 L 933 60 L 928 44 L 920 26 L 911 11 L 904 3 L 901 0 L 403 0 L 396 2 L 395 0 L 0 0 L 0 720 M 124 533 L 119 529 L 113 523 L 111 519 L 112 514 L 115 515 L 120 518 L 122 523 L 123 527 L 124 530"," M 694 720 L 697 697 L 699 679 L 701 653 L 702 628 L 703 592 L 704 565 L 704 542 L 705 518 L 705 497 L 704 478 L 702 455 L 700 438 L 697 423 L 691 402 L 686 387 L 681 373 L 675 360 L 668 346 L 664 331 L 661 317 L 660 303 L 662 289 L 666 277 L 672 265 L 683 255 L 696 248 L 711 243 L 723 242 L 739 242 L 755 244 L 770 247 L 783 251 L 796 256 L 808 264 L 818 275 L 825 285 L 832 298 L 838 315 L 841 331 L 843 346 L 845 361 L 846 371 L 850 391 L 856 406 L 864 418 L 876 429 L 889 438 L 904 442 L 920 444 L 937 444 L 952 442 L 965 438 L 974 433 L 981 426 L 988 418 L 995 406 L 1000 391 L 1004 375 L 1002 369 L 1004 355 L 1004 341 L 1004 324 L 1002 303 L 1000 286 L 998 267 L 995 251 L 992 233 L 988 211 L 984 188 L 979 168 L 974 151 L 968 132 L 962 113 L 955 94 L 947 74 L 940 60 L 932 44 L 924 31 L 917 21 L 910 9 L 902 0 L 0 0 L 0 720"," M 696 720 L 700 681 L 702 642 L 703 606 L 704 571 L 705 528 L 705 500 L 703 464 L 701 442 L 697 421 L 692 403 L 685 384 L 679 369 L 671 352 L 668 341 L 665 321 L 665 307 L 668 296 L 676 286 L 685 282 L 698 279 L 716 279 L 732 283 L 748 290 L 758 300 L 768 314 L 778 329 L 786 349 L 791 360 L 797 376 L 801 393 L 805 408 L 810 425 L 816 444 L 826 461 L 838 475 L 848 485 L 859 493 L 874 499 L 891 505 L 903 508 L 917 509 L 933 508 L 943 506 L 954 503 L 963 500 L 974 493 L 983 486 L 988 481 992 475 L 1000 463 L 1004 453 L 1009 438 L 1012 423 L 1015 399 L 1015 379 L 1015 361 L 1015 346 L 1015 327 L 1017 309 L 1022 294 L 1029 277 L 1040 252 L 1051 228 L 1058 207 L 1063 191 L 1063 176 L 1060 157 L 1050 139 L 1037 129 L 1025 125 L 1013 122 L 1000 121 L 987 122 L 975 125 L 967 128 L 961 108 L 953 89 L 944 67 L 934 48 L 925 33 L 915 17 L 909 8 L 902 0 L 0 0 L 0 720"," M 697 720 L 701 668 L 704 607 L 705 565 L 705 523 L 703 467 L 702 448 L 698 428 L 694 408 L 689 393 L 682 376 L 678 365 L 671 352 L 668 337 L 668 324 L 671 314 L 681 305 L 693 302 L 705 303 L 717 308 L 731 317 L 743 328 L 753 340 L 760 351 L 766 365 L 772 379 L 777 396 L 783 413 L 789 430 L 795 448 L 801 466 L 809 484 L 819 500 L 825 510 L 837 523 L 850 532 L 863 540 L 888 547 L 912 550 L 934 550 L 950 547 L 966 543 L 978 538 L 989 531 L 997 526 L 1002 519 L 1008 509 L 1014 499 L 1020 486 L 1025 468 L 1031 448 L 1035 425 L 1038 406 L 1040 376 L 1040 360 L 1041 343 L 1042 325 1044 308 L 1046 292 L 1050 275 L 1054 261 L 1058 249 L 1062 234 L 1068 221 L 1072 210 L 1077 202 L 1084 194 L 1095 179 L 1108 33 L 1084 31 L 1071 32 L 1053 34 L 1039 37 L 1023 41 L 1013 45 L 1003 50 L 988 60 L 973 70 L 961 80 L 953 87 L 946 70 L 937 53 L 927 37 L 918 22 L 909 9 L 903 0 L 0 0 L 0 720"," M 699 720 L 701 679 L 703 642 L 704 603 L 705 568 L 705 527 L 704 502 L 704 478 L 703 458 L 700 435 L 695 413 L 690 396 L 684 382 L 679 370 L 674 358 L 672 351 L 672 341 L 673 330 L 676 324 L 681 320 L 689 319 L 700 323 L 709 328 L 716 335 L 723 343 L 732 355 L 738 368 L 746 381 L 752 396 L 760 413 L 766 426 L 773 442 L 778 456 L 783 472 L 791 490 L 798 508 L 806 521 L 816 533 L 826 545 L 839 555 L 851 565 L 865 572 L 881 577 L 900 580 L 916 581 L 934 581 L 950 579 L 964 575 L 977 569 L 984 565 L 994 557 L 1003 548 L 1012 539 L 1018 532 L 1025 524 L 1033 509 L 1040 491 L 1045 470 L 1050 446 L 1055 418 L 1059 385 L 1062 360 L 1064 331 L 1067 306 L 1072 280 L 1082 241 L 1102 191 L 1094 13 L 1082 9 L 1071 6 L 1057 5 L 1042 5 L 1027 8 L 1014 11 L 1001 17 L 987 23 L 976 30 L 964 38 L 953 45 L 945 51 L 938 55 L 927 36 L 916 20 L 903 0 L 0 0 L 0 720"," M 701 720 L 703 672 L 704 623 L 704 584 L 705 544 L 704 512 L 704 475 L 702 447 L 699 432 L 696 416 L 691 400 L 685 385 L 681 373 L 678 363 L 679 355 L 680 350 L 683 347 L 689 346 L 694 348 L 698 352 L 704 359 L 708 366 L 712 374 L 717 384 L 723 397 L 731 412 L 738 426 L 744 442 L 748 455 L 753 468 L 759 485 L 764 500 L 773 520 L 780 536 L 792 551 L 806 566 L 822 578 L 835 589 L 854 598 L 871 602 L 888 605 L 912 607 L 937 608 L 969 603 L 987 598 L 1009 586 L 1023 575 L 1034 563 L 1044 544 L 1053 524 L 1061 501 L 1066 474 L 1071 454 L 1075 430 L 1078 410 L 1084 388 L 1083 0 L 978 0 L 967 6 L 960 10 L 953 15 L 946 20 L 935 28 L 926 34 L 913 15 L 903 0 L 0 0 L 0 720"," M 701 720 L 703 683 L 704 649 L 705 615 L 705 583 L 705 538 L 704 499 L 703 474 L 702 453 L 700 436 L 697 420 L 692 401 L 687 389 L 686 384 L 687 379 L 690 378 L 694 380 L 698 388 L 706 403 L 712 416 L 718 429 L 723 442 L 728 457 L 733 473 L 738 491 L 742 504 L 746 517 L 751 529 L 759 545 L 768 560 L 778 573 L 788 586 L 798 597 L 813 607 L 831 617 L 848 625 L 872 633 L 894 637 L 922 637 L 945 635 L 968 632 L 990 626 L 1009 617 L 1022 608 L 1036 595 L 1045 582 L 1057 565 L 1065 547 L 1073 528 L 1078 511 L 1086 489 L 1084 0 L 940 0 L 923 10 L 913 16 L 903 0 L 0 0 L 0 720"," M 701 720 L 703 685 L 704 638 L 705 591 L 705 552 L 704 518 L 704 488 L 702 459 L 701 442 L 699 429 L 704 444 L 710 459 L 717 483 L 724 504 L 732 526 L 742 549 L 754 575 L 765 593 L 776 608 L 791 623 L 804 635 L 822 647 L 841 655 L 867 661 L 893 665 L 921 664 L 949 663 L 970 661 L 991 656 L 1014 647 L 1032 637 L 1044 627 L 1057 613 L 1068 595 L 1077 580 L 1089 556 L 1086 0 L 912 0 L 905 3 L 903 0 L 0 0 L 0 720"," M 701 720 L 703 683 L 704 632 L 705 587 L 705 556 L 704 528 L 704 501 L 712 527 L 717 545 L 724 568 L 732 586 L 741 605 L 756 628 L 769 645 L 785 662 L 798 674 L 815 684 L 845 694 L 875 698 L 908 701 L 946 700 L 977 696 L 1004 689 L 1025 680 L 1045 667 L 1061 653 L 1071 639 L 1081 614 L 1088 0 L 0 0 L 0 720"," M 701 720 L 702 695 L 703 662 L 704 631 L 705 597 L 705 561 L 713 588 L 723 615 L 733 636 L 747 658 L 760 673 L 778 692 L 797 705 L 815 713 L 832 719 L 837 720 L 990 720 L 1013 712 L 1035 702 L 1055 689 L 1072 675 L 1084 657 L 1087 0 L 0 0 L 0 720"," M 701 720 L 702 691 L 704 658 L 705 617 L 712 640 L 719 657 L 729 672 L 742 689 L 754 704 L 765 712 L 774 718 L 779 720 L 1045 720 L 1056 715 L 1067 709 L 1078 701 L 1087 689 L 1086 0 L 0 0 L 0 720"," M 701 720 L 702 701 L 703 680 L 704 665 L 712 685 L 722 700 L 733 712 L 740 718 L 744 720 L 1075 720 L 1088 712 L 1088 0 L 0 0 L 0 720"," M 701 720 L 702 707 L 703 695 L 711 710 L 714 715 L 718 719 L 719 720 L 1086 720 L 1090 0 L 0 0 L 0 720"," M 701 720 L 702 713 L 706 720 L 1086 720 L 1089 0 L 0 0 L 0 720"," M 1080 720 L 1080 0 L 0 0 L 0 720",""];


/*

//Left
	//Open
		d: path("M 0 0 L 333 0 Q 297 473 140 545 Q 197 631 199 720 L 0 720 Z");
	//Closed
		d: path("M 0 0 L 640 0 Q 640 473 640 545 Q 640 631 640 720 L 0 720 Z");

//Right
	//Open
		d: path("M 1280 0 L 947 0 Q 983 473 1140 545 Q 1083 631 1081 720 L 1280 720 Z");
	//Closed
		d: path("M 1280 0 L 640 0 Q 640 473 640 545 Q 640 631 640 720 L 1280 720 Z");


*/



/*

TODO ###############################

- Make sure elements are on the sides
- When using it in the page add Z to some stuff

*/





/*
for(let i = 0;i < path_data.length;i += 1){
	path_data[i] = path_data[i].trim().replace(/ M/g, " Z M");
	
	if(path_data[i].length > 0){
		path_data[i] += " Z";
	}
}
*/


let container = document.querySelector("#container");
let img_parent = document.querySelector("#img_parent");
let brush_paint = document.querySelector("#brush_paint");

/*
{
	id: 0,
	width: 200,
	height: 300,
	offset_y: 100,
	map_x: 0,
	map_y: 0
}
*/
let draw_frame = function(type, number){
	let data = animation_map_data[type][number];
	
	
	if(path_data[shown_frame] !== undefined){
		brush_paint.setAttribute("d", path_data[shown_frame]);
	} else {
		brush_paint.setAttribute("d", "");
	}
	
	
	/*if(data === null){
		return;
	}*/
	if(data === null){
		let total_frames = animation_info[type].frames;
		data = animation_map_data[type][(number - 1 + total_frames) % total_frames];
	}
	
	let top = data.offset_y;
	let width = data.width;
	let height = data.height;
	let position_x = data.map_x;
	let position_y = data.map_y;
	
	img_parent.style.top = (top + "px");
	img_parent.style.width = (width + "px");
	img_parent.style.height = (height + "px");
	img_parent.style.backgroundPositionX = (-position_x + "px");
	img_parent.style.backgroundPositionY = (-position_y + "px");
	
	
};


let types = [
	"idle",
	"idle_blink",
	"painting"
];

let animation_info = {
	idle: {
		frames: 20,
		fps: 15
	},
	idle_blink: {
		frames: 20,
		fps: 15
	},
	painting: {
		frames: 55,
		fps: 15
	}
};


let map_img = document.createElement("img");
map_img.src = "./animation_map.png";


map_img.onerror = function(){
	alert("error loading image");
};

map_img.onload = function(){
	console.log("images loaded");
	
	//container.appendChild(map_img);
	draw_frame("painting", shown_frame);
};







let interval_id = undefined;

let set_painting_animation = function(){
	clearInterval(interval_id);
	
	let type = "painting";
	let i = 0;
	let total_frames = animation_info[type].frames;
	
	interval_id = setInterval(function(){
		shown_frame = (i % total_frames);
		draw_frame(type, (i % total_frames));
		
		i += 1;
		
		/*
		if(i >= total_frames){
			set_idle_animation(0);
		}
		*/
	}, (1000 / 15));
};


let set_idle_animation = function(start_index = 0){
	clearInterval(interval_id);
	
	let type = "idle";
	let i = start_index;
	let total_frames = animation_info[type].frames;
	
	interval_id = setInterval(function(){
		shown_frame = (i % total_frames);
		draw_frame(type, (i % total_frames));
		
		
		i += 1;
		
		if(i >= (15 + 2 * total_frames)){
			set_painting_animation();
		}
	}, (1000 / 15));
};



//You can create a path by clicking on the image. You can start at a new position by clicking while holding ctrl.
//
//
click_screen.onclick = function(event){
	let x = event.offsetX;
	let y = event.offsetY;
	
	let d = brush_paint.getAttribute("d");
	
	if(d.length === 0
	|| event.ctrlKey === true){
		brush_paint.setAttribute("d", (`${d} M ${x} ${y}`));
	} else {
		brush_paint.setAttribute("d", (`${d} L ${x} ${y}`));
	}
};







let shown_frame = 0;



next_button.onclick = function(){
	path_data[shown_frame] = brush_paint.getAttribute("d");
	brush_paint_previous.setAttribute("d", path_data[shown_frame]);
	
	let total_frames = animation_info["painting"].frames;
	shown_frame = ((shown_frame + 1 + total_frames) % total_frames);
	draw_frame("painting", shown_frame);
};

previous_button.onclick = function(){
	path_data[shown_frame] = brush_paint.getAttribute("d");
	brush_paint_previous.setAttribute("d", path_data[shown_frame]);
	
	let total_frames = animation_info["painting"].frames;
	shown_frame = ((shown_frame - 1 + total_frames) % total_frames);
	draw_frame("painting", shown_frame);
};

play_button.onclick = function(){
	path_data[shown_frame] = brush_paint.getAttribute("d");
	brush_paint_previous.style.opacity = 0;
	
	set_painting_animation();
};

stop_button.onclick = function(){
	clearInterval(interval_id);
	
	brush_paint_previous.style.opacity = null;
	
	let total_frames = animation_info["painting"].frames;
	let previous_frame = (shown_frame - 1 + total_frames) % total_frames;
	
	if(path_data[previous_frame] !== undefined){
		brush_paint_previous.setAttribute("d", path_data[previous_frame]);
	} else {
		brush_paint_previous.setAttribute("d", "");
	}
};

save_button.onclick = function(){
	path_data[shown_frame] = brush_paint.getAttribute("d");
	console.log(`let path_data = ${JSON.stringify(path_data)};`);
};






</script>


</body>
</html>